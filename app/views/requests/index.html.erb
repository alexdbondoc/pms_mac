<h1 align="center">List of All Requests</h1>
<div align="center">
  <%= will_paginate %>
  <% @requests.each do |req| %>
  <div class="row">
    <div class="col-xs-8 col-xs-offset-2">
      <div class="well well-lg">
        <div class="article-title">
          <%= link_to req.category.name, request_path(req) %>
        </div>
        <div class="article-body">
          Purpose: <%= truncate(req.reason, length: 100) %> <br>
          <small><%= req.status %></small>
          <div class="article-meta-details">
            <small>Created by: <%= req.user.empname if req.user%>,
                    <%= time_ago_in_words(req.created_at) %> ago,
                    last updated: <%= time_ago_in_words(req.updated_at) %> ago</small>
          </div>

        <% if logged_in? && (current_user == req.user) %>
          <div class="article-actions">
            <%= link_to "Edit this request", edit_request_path(req), class: "btn btn-xs btn-primary" %>
            <%= link_to "Delete this request", request_path(req), method: :delete, 
                                        data: { confirm: "Are you sure you want to delete the request?"}, 
                                        class: "btn btn-xs btn-danger" %>  
          </div>
    <% end %>
        </div>
      </div>
    </div>
  </div>
  <% end %>
  <center><%= will_paginate %></center>
  <center><%= link_to "Generate new request", new_request_path %></center>
</div>